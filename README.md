

## 🎯 项目概述

这是一个基于AI的智能信息茧房破除浏览器插件，主要功能是通过AI分析用户浏览的内容，提供多样化的内容推荐，帮助用户打破信息茧房。

## ��️ 后台架构设计

### 1. **核心模块结构**

```
background.js (主控制器)
├── ai-classifier.js (AI分类器)
├── api-client.js (API客户端)
├── category-schema.js (分类体系)
├── content-extractor.js (内容提取器)
└── content.js (内容脚本)
```

### 2. **后台核心组件分析**

#### **A. 背景脚本 (background.js)**
- **作用**: 整个插件的中央控制器
- **主要功能**:
  - 管理AI分类系统的初始化
  - 处理内容脚本的消息
  - 记录用户行为数据
  - 生成智能推荐
  - 管理存储和缓存

#### **B. AI分类器 (ai-classifier.js)**
- **两步式分类算法**:
  1. 第一步：确定8个主类别之一
  2. 第二步：在主类别下细分到32个子类别
- **智能特性**:
  - 置信度评估
  - 结果验证
  - 备用分类机制
  - 批量处理能力

#### **C. API客户端 (api-client.js)**
- **专门针对智谱GLM-4.5优化**
- **功能特性**:
  - 请求频率控制（每分钟最多20次）
  - 智能缓存机制
  - 超时处理（60秒）
  - 错误重试机制

#### **D. 分类体系 (category-schema.js)**
- **3级层级结构**:
  ```
  8个主类别 × 4个子类别 = 32个子类别
  ```
- **主类别包括**:
  - 科技创新、文化艺术、科学探索
  - 社会人文、生活方式、教育成长
  - 商业财经、娱乐休闲

#### **E. 内容提取器 (content-extractor.js)**
- **多平台支持**: 抖音、小红书、快手、YouTube、TikTok
- **智能提取**: 标题、描述、标签、作者信息
- **质量评估**: 内容完整性、相关性、清晰度评分
- **平台特定优化**: 针对不同平台的选择器和清理规则

## 🔄 数据流程

### 1. **内容分析流程**
```
用户浏览页面 → 内容提取 → 质量评估 → AI分类 → 行为记录 → 推荐生成
```

### 2. **AI分类详细流程**
```
内容输入 → 数据标准化 → 主类别分类 → 子类别分类 → 结果验证 → 缓存存储
```

### 3. **推荐生成流程**
```
行为历史 → 兴趣分析 → 多样性计算 → 智能推荐 → 用户界面展示
```

## 🎛️ 智能特性

### 1. **防重复分析机制**
- URL变化检测
- 内容哈希去重
- 静态页面标记
- 分析状态管理

### 2. **质量过滤系统**
- 内容质量评分（0-100分）
- 只对高质量内容（≥40分）进行AI分析
- 低质量内容使用备用方法

### 3. **智能缓存策略**
- 基于完整提示词的哈希缓存
- 自动清理过期缓存
- 减少重复API调用

### 4. **降级机制**
- AI分类失败时自动降级到关键词匹配
- 确保系统稳定性
- 多层级备用方案

## 📊 性能优化

### 1. **请求控制**
- 速率限制：每分钟最多20次API调用
- 超时控制：60秒请求超时
- 批量处理：支持批量分类

### 2. **缓存优化**
- 智能缓存键生成
- 缓存大小控制（最多100条）
- 自动清理机制

### 3. **内容过滤**
- 主页/信息流页面跳过分析
- 内容质量阈值过滤
- 重复内容检测

## 🔧 配置管理

### 1. **AI配置**
- API密钥管理
- 模型选择（默认GLM-4.5）
- 温度参数调整
- 超时设置

### 2. **用户设置**
- 信息茧房检测敏感度（30%-90%）
- AI分类功能开关
- 阈值百分比配置

### 3. **开发配置**
- 开发模式自动配置
- 调试日志开关
- 测试连接功能

## �� 监控和分析

### 1. **分类统计**
- 总分类次数
- 成功率统计
- 平均置信度
- AI分类比例

### 2. **系统状态监控**
- API连接状态
- 缓存使用情况
- 错误率统计
- 性能指标

## ��️ 安全特性

### 1. **数据保护**
- 仅发送必要的内容元数据
- 本地存储用户行为
- 不收集敏感个人信息

### 2. **API安全**
- API密钥本地存储
- 请求频率限制
- 错误信息脱敏

## �� 扩展性设计

### 1. **模块化架构**
- 各组件独立可替换
- 插件化设计
- 易于功能扩展

### 2. **多平台支持**
- 统一的内容提取接口
- 平台特定的优化
- 易于添加新平台

### 3. **AI服务兼容**
- 支持多种AI API
- 统一的接口规范
- 易于切换服务商

这个项目的后台实现展现了现代浏览器插件的先进架构设计，通过AI技术实现了从固定标签池到智能分类的升级，为用户提供了更精准、更个性化的内容推荐服务。